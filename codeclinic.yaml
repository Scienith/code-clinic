tool:
  paths:
  - src
  include:
  - '**/*.py'
  exclude:
  - '**/.venv/**'
  - '**/migrations/**'
  - '**/tests/**'
  output: build/codeclinic
tools:
  formatter:
    provider: black
    line_length: 88
  linter:
    provider: ruff
    ruleset:
    - E
    - F
    - I
    - B
    - D
    line_length: 88
    unsafe_fixes: false
    docstyle_convention: google
  typecheck:
    provider: mypy
    strict: true
  tests:
    provider: pytest
    args:
    - -q
    coverage:
      min: 80
      report: xml
    junit:
      enabled: true
      output: build/codeclinic/artifacts/junit.xml
  complexity:
    provider: radon
    max_file_loc: 500
  deps:
    provider: internal
    import_rules:
      matrix_default: deny
      forbid_private_modules: true
      allow_patterns:
      - - '*'
        - <self>.*
      - - '*'
        - <ancestor>.schemas
      - - '*'
        - <ancestor>.types
      - - apps.*.**
        - apps.*.public
      - - apps.*.**
        - apps.*.public.**
      - - '*'
        - utils
      - - '*'
        - utils.**
      - - '*'
        - types
      - - '*'
        - types.**
      - - '*'
        - common
      - - '*'
        - common.**
      - - '*'
        - <ancestor>.schemas.**
      - - '*'
        - <ancestor>.types.**
  stubs:
    provider: internal
    decorator_names:
    - stub
gates:
  formatter_clean: true
  linter_errors_max: 0
  mypy_errors_max: 0
  coverage_min: 80
  max_file_loc: 500
  import_violations_max: 0
  stub_ratio_max: 0.25
  doc_contracts_missing_max: 0
  fn_loc_max: 50
  fn_args_max: 5
  fn_nesting_max: 3
  exports_no_private: true
  components_dep_stub_free_requires_green: true
  allow_missing_component_tests: false
  packages_require_dunder_init: true
  modules_require_named_tests: true
components:
  scope: package
  tests_dir_name: tests
  dependency_scope: transitive
  require_self_stub_free: false
