version: "1.0"

# 基础配置
paths:
  - "example_project"
output: "example_analysis"
format: "svg"
count_private: false

# 导入规则配置
import_rules:
  # 白名单：这些模块可以被任何地方导入
  white_list: ["common"]
    
  # 规则开关
  rules:
    allow_cross_package: false    # 禁止跨包导入（A包不能导入B包）
    allow_upward_import: false    # 禁止子模块导入父模块
    allow_skip_levels: false      # 禁止跳级导入

# === QA Facade configuration ===
tool:
  paths: ["example_project"]
  include: ["**/*.py"]
  exclude: ["**/.venv/**", "**/migrations/**", "**/tests/**"]
  output: "build/codeclinic"

tools:
  formatter:
    provider: black
    line_length: 88
  linter:
    provider: ruff
    ruleset: ["E","F","I","B"]
    line_length: 88
    unsafe_fixes: false
  typecheck:
    provider: mypy
    strict: true
  tests:
    provider: pytest
    args: ["-q"]
    coverage:
      min: 0
      report: "xml"
    junit:
      enabled: true
      output: "build/codeclinic/artifacts/junit.xml"
  complexity:
    provider: radon
    max_file_loc: 2000
  deps:
    provider: internal
  stubs:
    provider: internal

gates:
  formatter_clean: true
  linter_errors_max: 0
  mypy_errors_max: 0
  coverage_min: 0
  max_file_loc: 2000
  import_violations_max: 9999
  stub_ratio_max: 1.0
  components_dep_stub_free_requires_green: true
  allow_missing_component_tests: false
  packages_require_dunder_init: true

components:
  scope: module
  tests_dir_name: tests
  dependency_scope: transitive
  require_self_stub_free: false
